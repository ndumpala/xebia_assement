{"ast":null,"code":"import _regeneratorRuntime from \"/Users/nitheshdumpala/xebia_assement/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/nitheshdumpala/xebia_assement/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/nitheshdumpala/xebia_assement/src/pages/LoginPage.jsx\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nclass Loginpage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userName: null,\n      password: null,\n      errors: {\n        userName: \"\",\n        password: \"\"\n      },\n      authFail: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  validateForm() {\n    let valid = true;\n    Object.values(this.state.errors).forEach(val => val.length > 0 && (valid = false));\n    return valid;\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    const _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n    let errors = this.state.errors;\n\n    switch (name) {\n      case \"userName\":\n        errors.userName = value.length < 3 ? \"Full Name must be 3 characters long!\" : \"\";\n        break;\n\n      case \"password\":\n        errors.password = value.length < 3 ? \"Password must be 3 characters long!\" : \"\";\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState({\n      errors,\n      [name]: value,\n      authFail: false\n    });\n  }\n\n  handleSubmit() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _this$state, userName, password, history, response, user;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!_this.validateForm()) {\n              _context.next = 11;\n              break;\n            }\n\n            _this$state = _this.state, userName = _this$state.userName, password = _this$state.password;\n            history = _this.props.history;\n            _context.next = 5;\n            return fetch(\"https://xebiascart.herokuapp.com/users?username=\".concat(userName), {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json;charset=utf-8\"\n              }\n            });\n\n          case 5:\n            response = _context.sent;\n            _context.next = 8;\n            return response.json();\n\n          case 8:\n            user = _context.sent;\n            user.map(user => {\n              if (user.username === userName && user.password === password) {\n                _this.props.sendLogin({\n                  userName: userName,\n                  login: true\n                });\n\n                sessionStorage.setItem(\"user\", userName);\n                history.push(\"/searchResultsPage\");\n                return true;\n              }\n\n              return false;\n            });\n\n            _this.setState({\n              authFail: true\n            });\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App bgBlack color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"padding-vertical-lg margin-horizontal-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }, \"sCart\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login bgBlack text-center padding-vertical-xlg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-size-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }, \"LogIn\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"margin-vertical-lg text-size-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"userName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, \"User Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"userName\",\n      placeholder: \"userName\",\n      className: \"margin-horizontal-sm\",\n      name: \"userName\",\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    })), this.state.errors.userName && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, this.state.errors.userName), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"margin-vertical-lg text-size-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, \"Password:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      id: \"password\",\n      placeholder: \"password\",\n      className: \"margin-horizontal-sm\",\n      name: \"password\",\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    })), this.state.errors.password.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, this.state.errors.password), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"margin-vertical-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"success text-size-sm\",\n      name: \"button\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, \"Sign In\"), this.state.authFail && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error margin-vertical-md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, \"Please Enter a Valid Details.\"))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    sendLogin: data => {\n      dispatch({\n        type: \"FETCH_LOGIN_SUCCESS\",\n        payload: data\n      });\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(Loginpage);","map":{"version":3,"sources":["/Users/nitheshdumpala/xebia_assement/src/pages/LoginPage.jsx"],"names":["React","connect","Loginpage","Component","constructor","props","state","userName","password","errors","authFail","handleChange","bind","validateForm","handleSubmit","valid","Object","values","forEach","val","length","event","preventDefault","target","name","value","setState","history","fetch","method","headers","response","json","user","map","username","sendLogin","login","sessionStorage","setItem","push","render","mapDispatchToProps","dispatch","data","type","payload"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\n\nclass Loginpage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userName: null,\n      password: null,\n      errors: {\n        userName: \"\",\n        password: \"\"\n      },\n      authFail: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  validateForm() {\n    let valid = true;\n    Object.values(this.state.errors).forEach(\n      val => val.length > 0 && (valid = false)\n    );\n    return valid;\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    const { name, value } = event.target;\n    let errors = this.state.errors;\n\n    switch (name) {\n      case \"userName\":\n        errors.userName =\n          value.length < 3 ? \"Full Name must be 3 characters long!\" : \"\";\n        break;\n      case \"password\":\n        errors.password =\n          value.length < 3 ? \"Password must be 3 characters long!\" : \"\";\n        break;\n      default:\n        break;\n    }\n    this.setState({ errors, [name]: value, authFail: false });\n  }\n\n  async handleSubmit() {\n    if (this.validateForm()) {\n      const { userName, password } = this.state;\n      const { history } = this.props;\n      const response = await fetch(\n        `https://xebiascart.herokuapp.com/users?username=${userName}`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json;charset=utf-8\"\n          }\n        }\n      );\n\n      const user = await response.json();\n      user.map(user => {\n        if (user.username === userName && user.password === password) {\n          this.props.sendLogin({ userName: userName, login: true });\n          sessionStorage.setItem(\"user\", userName);\n          history.push(\"/searchResultsPage\");\n          return true;\n        }\n        return false;\n      });\n      this.setState({\n        authFail: true\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"App bgBlack color-white\">\n        <h1 className=\"padding-vertical-lg margin-horizontal-lg\">sCart</h1>\n        <div className=\"login bgBlack text-center padding-vertical-xlg\">\n          <div className=\"text-size-sm\">LogIn</div>\n          <div className=\"margin-vertical-lg text-size-sm\">\n            <label htmlFor=\"userName\">User Name:</label>\n            <input\n              type=\"text\"\n              id=\"userName\"\n              placeholder=\"userName\"\n              className=\"margin-horizontal-sm\"\n              name=\"userName\"\n              onChange={this.handleChange}\n              required\n            />\n          </div>\n          {this.state.errors.userName && (\n            <div className=\"error\">{this.state.errors.userName}</div>\n          )}\n          <div className=\"margin-vertical-lg text-size-sm\">\n            <label htmlFor=\"password\">Password:</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              placeholder=\"password\"\n              className=\"margin-horizontal-sm\"\n              name=\"password\"\n              onChange={this.handleChange}\n              required\n            />\n          </div>\n          {this.state.errors.password.length > 0 && (\n            <span className=\"error\">{this.state.errors.password}</span>\n          )}\n          <div className=\"margin-vertical-lg\">\n            <button\n              className=\"success text-size-sm\"\n              name=\"button\"\n              onClick={this.handleSubmit}\n            >\n              Sign In\n            </button>\n            {this.state.authFail && (\n              <div className=\"error margin-vertical-md\">\n                Please Enter a Valid Details.\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    sendLogin: data => {\n      dispatch({ type: \"FETCH_LOGIN_SUCCESS\", payload: data });\n    }\n  };\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(Loginpage);\n"]},"metadata":{},"sourceType":"module"}